<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Benchmarking · L-BFGS GPU</title><meta name="title" content="Benchmarking · L-BFGS GPU"/><meta property="og:title" content="Benchmarking · L-BFGS GPU"/><meta property="twitter:title" content="Benchmarking · L-BFGS GPU"/><meta name="description" content="Documentation for L-BFGS GPU."/><meta property="og:description" content="Documentation for L-BFGS GPU."/><meta property="twitter:description" content="Documentation for L-BFGS GPU."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="L-BFGS GPU logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">L-BFGS GPU</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="problem.html">Problem</a></li><li><a class="tocitem" href="solution.html">Solution</a></li><li><a class="tocitem" href="example.html">Example</a></li><li class="is-active"><a class="tocitem" href="benchmarking.html">Benchmarking</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Quadratic-function-for-height-40"><span>Quadratic function for height = 40</span></a></li><li class="toplevel"><a class="tocitem" href="#Measured-data-for-Quadratic-function"><span>Measured data for Quadratic function</span></a></li></ul></li><li><a class="tocitem" href="tests.html">Tests</a></li><li><a class="tocitem" href="ack.html">Acknowledgements</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="benchmarking.html">Benchmarking</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="benchmarking.html">Benchmarking</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/matouon/lbfgsgpu.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/matouon/lbfgsgpu.jl/blob/master/docs/src/benchmarking.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Benchmarking-L-BFGS-Optimization-with-and-without-CUDA-Acceleration"><a class="docs-heading-anchor" href="#Benchmarking-L-BFGS-Optimization-with-and-without-CUDA-Acceleration">Benchmarking L-BFGS Optimization with and without CUDA Acceleration</a><a id="Benchmarking-L-BFGS-Optimization-with-and-without-CUDA-Acceleration-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmarking-L-BFGS-Optimization-with-and-without-CUDA-Acceleration" title="Permalink"></a></h1><p>The package can be used to evaluate the performance of the L-BFGS optimization method for various functions, both with and without CUDA acceleration. The functions are:</p><ul><li><strong>Gaussian Function</strong> </li><li><strong>Gaussian with Squared Input</strong></li><li><strong>Quadratic Function</strong> </li></ul><p>A single benchmarking test is performed with increasing solution sizes, and the execution time (mean and minimum) for both CPU and GPU implementations is recorded.</p><p>The performance is measured using BenchmarkTools, with benchmarking being run on both CPU and GPU (using CUDA). Results, including computation times and minimum values of the objective functions, can be stored in a DataFrame format for further analysis. The optimization function is selected based on a user string input (f_str), allowing for flexible function testing.</p><p>I will show the plot only for quadratic function as even for 100 variables the simple gaussian took both solvers about 30 minutes to benchmark and if I was to somehow approximate the relationship between number of variables used in the optimization and the time which it takes to finish the @benchmark test as a linear function, it would take cca 30<em>8064=24</em>e4 seconds, which is about 3 days of continuous load for a single benchmarking test, which my parents would probably not be happy about :o).</p><p>The plot can be recreated using simple plotting script in scripts/plot_bench.jl</p><h1 id="Quadratic-function-for-height-40"><a class="docs-heading-anchor" href="#Quadratic-function-for-height-40">Quadratic function for height = 40</a><a id="Quadratic-function-for-height-40-1"></a><a class="docs-heading-anchor-permalink" href="#Quadratic-function-for-height-40" title="Permalink"></a></h1><p><img src="assets/cuda_vs_no_cuda_lineplot.png" alt="My Image"/></p><p>The plot has logarithmic y-axis, hence the difference in time is bigger. The original values together with the measured data in table are shown below.</p><h1 id="Measured-data-for-Quadratic-function"><a class="docs-heading-anchor" href="#Measured-data-for-Quadratic-function">Measured data for Quadratic function</a><a id="Measured-data-for-Quadratic-function-1"></a><a class="docs-heading-anchor-permalink" href="#Measured-data-for-Quadratic-function" title="Permalink"></a></h1><p>The data were rounded to 4 decimal points</p><table><tr><th style="text-align: right">Num_Variables</th><th style="text-align: right">CUDA</th><th style="text-align: right">Mean_t</th><th style="text-align: right">Min_t</th><th style="text-align: right">Min_Value</th></tr><tr><td style="text-align: right">100</td><td style="text-align: right">false</td><td style="text-align: right">0.0032</td><td style="text-align: right">0.0009</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">100</td><td style="text-align: right">true</td><td style="text-align: right">0.0132</td><td style="text-align: right">0.0117</td><td style="text-align: right">0.0002</td></tr><tr><td style="text-align: right">200</td><td style="text-align: right">false</td><td style="text-align: right">0.0108</td><td style="text-align: right">0.0037</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">200</td><td style="text-align: right">true</td><td style="text-align: right">0.1221</td><td style="text-align: right">0.1097</td><td style="text-align: right">0.0003</td></tr><tr><td style="text-align: right">2000</td><td style="text-align: right">false</td><td style="text-align: right">0.8175</td><td style="text-align: right">0.7480</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">2000</td><td style="text-align: right">true</td><td style="text-align: right">0.0170</td><td style="text-align: right">0.0133</td><td style="text-align: right">0.0037</td></tr><tr><td style="text-align: right">3000</td><td style="text-align: right">false</td><td style="text-align: right">2.7774</td><td style="text-align: right">1.8775</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">3000</td><td style="text-align: right">true</td><td style="text-align: right">0.8006</td><td style="text-align: right">0.7481</td><td style="text-align: right">0.0057</td></tr><tr><td style="text-align: right">5000</td><td style="text-align: right">false</td><td style="text-align: right">6.5454</td><td style="text-align: right">6.5454</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">5000</td><td style="text-align: right">true</td><td style="text-align: right">0.0180</td><td style="text-align: right">0.0146</td><td style="text-align: right">0.0095</td></tr><tr><td style="text-align: right">7000</td><td style="text-align: right">false</td><td style="text-align: right">11.9569</td><td style="text-align: right">11.9569</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">7000</td><td style="text-align: right">true</td><td style="text-align: right">0.0926</td><td style="text-align: right">0.0822</td><td style="text-align: right">0.0136</td></tr><tr><td style="text-align: right">10000</td><td style="text-align: right">false</td><td style="text-align: right">24.0851</td><td style="text-align: right">24.0851</td><td style="text-align: right">0.0000</td></tr><tr><td style="text-align: right">10000</td><td style="text-align: right">true</td><td style="text-align: right">0.0237</td><td style="text-align: right">0.0196</td><td style="text-align: right">0.0195</td></tr></table><p>It is clear that the more variables we use, the more CUDA enabled solution dominates. The most extreme values tell us that even though we have on 10000 variable optimization problem,  the best (smallest) sum of squared errors was 0.0195 (which by itself is very small -&gt; 0.0195/1e4=...), we got speedup of around 24/0.02=1200!! This means that if we optimized 10000 variable quadratic function using CUDA, it would run in average 600 times faster than on CPU.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="example.html">« Example</a><a class="docs-footer-nextpage" href="tests.html">Tests »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 12 February 2025 15:45">Wednesday 12 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
